<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>K-MOOC</title>
    <link rel="stylesheet" href="/css/main.css">
    <style>
        .notice-content {
            display: block;
            overflow: hidden;
            height: 50px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .notice-content.active {
            opacity: 1;
        }

        .notice-content.hide {
            opacity: 0;
        }
    </style>
</head>
<body>

    <div id="header-content"></div>
    <script>
    fetch("header.html")
        .then(response => response.text())
        .then(data => {
        document.getElementById("header-content").innerHTML = data;
        });
    </script>

<div layout:fragment="maincontent">
    <section class="banner">
        <div class="main-banner" id="mainBanner" style="height: 500px; width: 100%">
            <img src="/images/mainbanner1.png" class="active" style="min-height: 500px;width: 100%;"/>
            <img src="/images/mainbanner2.png" style="min-height: 500px;width: 100%;"/>
            <div class="banner-dots" id="bannerDots"></div>
        </div>
    </section>
    <div class="notice-board">

        <div id="notice-display" class="notice-content">
            <p class="notice-text">ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
            <p class="notice-date"></p>
        </div>

        <div class="dropdown-icon">
            <a href="javascript:void(0);">&#9660;</a>
        </div>


    </div>
    <section class="search">
        <div class="search-container">
            <form action="/course/list/all" method="get">
                <div class="search-box">
                    <h2>ê²€ìƒ‰</h2>
                    <div class="search-input">
                        <input type="text" name="searchValue" placeholder="ë°°ìš°ê³  ì‹¶ì€ ê°•ì¢Œë¥¼ ì°¾ì•„ë³´ì„¸ìš”." maxlength="100">
                        <button type="submit">
                            <img src="/images/searchicon.png" alt="search"/>
                        </button>
                    </div>
                </div>
            </form>
            <div class="categories">
                <a href="/course/list/all?subjectId=1">ì¸ë¬¸</a>
                <a href="/course/list/all?subjectId=2">ì‚¬íšŒ</a>
                <a href="/course/list/all?subjectId=4">ê³µí•™</a>
                <a href="/course/list/all?subjectId=3">êµìœ¡</a>
                <a href="/course/list/all?subjectId=5">ìì—°</a>
                <a href="/course/list/all">ì „ì²´</a>
            </div>

        </div>
    </section>
    <div class="course-container">
        <h2>K-MOOCì—ì„œ ì¶”ì²œí•˜ëŠ” ê°•ì¢Œ ë¦¬ìŠ¤íŠ¸</h2>
        <div class="course-list">
        
            <div class="course-card pointer" >
                <div class="course-image">
                    <img src="/images/thumbnail/thumbnail1.png" >
                    <span class="badge ongoing">ì§„í–‰ì¤‘</span>
                    <span class="badge popular">í•™ì ì€í–‰ì œ</span>
                </div>
                <div class="course-info">
                    <h3 th:text="${item.title}"></h3>
                    <p><span th:text="${item.teacherName}"></span><br><span>ì‚¬íšŒ</span></p>
                    <p class="course-date">2025</p>
                    <div class="tags">
                    </div>
                </div>
            </div>
            <div class="course-card pointer" >
                <div class="course-image">
                    <img src="/images/thumbnail/thumbnail2.png" >
                    <span class="badge ongoing">ì§„í–‰ì¤‘</span>
                    <span class="badge popular">í•™ì ì€í–‰ì œ</span>
                </div>
                <div class="course-info">
                    <h3 th:text="${item.title}"></h3>
                    <p><span th:text="${item.teacherName}"></span><br><span>ì‚¬íšŒ</span></p>
                    <p class="course-date">2025</p>
                    <div class="tags">
                    </div>
                </div>
            </div>
            <div class="course-card pointer" >
                <div class="course-image">
                    <img src="/images/thumbnail/thumbnail3.jpg" >
                    <span class="badge ongoing">ì§„í–‰ì¤‘</span>
                    <span class="badge popular">í•™ì ì€í–‰ì œ</span>
                </div>
                <div class="course-info">
                    <h3 th:text="${item.title}"></h3>
                    <p><span th:text="${item.teacherName}"></span><br><span>ì‚¬íšŒ</span></p>
                    <p class="course-date">2025</p>
                    <div class="tags">
                    </div>
                </div>
            </div>
            <div class="course-card pointer" >
                <div class="course-image">
                    <img src="/images/thumbnail/thumbnail4.png" >
                    <span class="badge ongoing">ì§„í–‰ì¤‘</span>
                    <span class="badge popular">í•™ì ì€í–‰ì œ</span>
                </div>
                <div class="course-info">
                    <h3 th:text="${item.title}"></h3>
                    <p><span th:text="${item.teacherName}"></span><br><span>ì‚¬íšŒ</span></p>
                    <p class="course-date">2025</p>
                    <div class="tags">
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <div class="course-container">
        <div class="category-container">
            <div class="category-item" style="background-color: #a13bbc;" data-subject="1">
                <div class="icon">ğŸ“–</div>
                <div class="text">ì¸ë¬¸</div>
            </div>
            <div class="category-item" style="background-color: #7a3bbf;" data-subject="2">
                <div class="icon">ğŸ’¬</div>
                <div class="text">ì‚¬íšŒ</div>
            </div>
            <div class="category-item" style="background-color: #289e2e;" data-subject="3">
                <div class="icon">ğŸ’»</div>
                <div class="text">êµìœ¡</div>
            </div>
            <div class="category-item" style="background-color: #1d79ac;" data-subject="4">
                <div class="icon">ğŸ§¬</div>
                <div class="text">ê³µí•™</div>
            </div>
            <div class="category-item" style="background-color: #009687;" data-subject="5">
                <div class="icon">ğŸŒ±</div>
                <div class="text">ìì—°</div>
            </div>
            <div class="category-item" style="background-color: #3055a4;" data-subject="6">
                <div class="icon">ğŸ©º</div>
                <div class="text">ì˜ì•½</div>
            </div>
            <div class="category-item" style="background-color: #e14a3a;" data-subject="7">
                <div class="icon">ğŸµ</div>
                <div class="text">ì˜ˆì²´ëŠ¥</div>
            </div>
            <div class="category-item" style="background-color: #e55c12;" data-subject="8">
                <div class="icon">ğŸ”¬</div>
                <div class="text">ìœµÂ·ë³µí•©</div>
            </div>
            <div class="category-item" style="background-color: #d4145a;" data-subject="9">
                <div class="icon">ğŸ”²</div>
                <div class="text">ê¸°íƒ€</div>
            </div>
        </div>
    </div>
</div>
<div id="footer-content"></div>
    <script>
    fetch("footer.html")
        .then(response => response.text())
        .then(data => {
        document.getElementById("footer-content").innerHTML = data;
        });
    </script>

<script layout:fragment="script" th:inline="javascript">

   document.addEventListener("DOMContentLoaded", function () {
  const noticeDisplay = document.getElementById("notice-display");
  const dropdownIcon = document.querySelector(".dropdown-icon a");
  let currentIndex = 0;

  // í•˜ë“œì½”ë”©ëœ ê³µì§€ì‚¬í•­ ëª©ë¡
  const notices = [
    {
      title: "í•™ì ì€í–‰ì œ ê¸°ì¤€ ë³€ê²½ì‚¬í•­ ì•ˆë‚´",
      date: "2025-07-20"
    },
    {
      title: "K-MOOC ì—¬ë¦„í•™ê¸° ê°œê°• ì•ˆë‚´",
      date: "2025-07-15"
    },
    {
      title: "ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´ (8/1 00:00~02:00)",
      date: "2025-07-25"
    }
  ];

  // ê³µì§€ì‚¬í•­ í‘œì‹œ
  function displayNotice(notice) {
    // ê¸°ì¡´ ë‚´ìš© ìˆ¨ê¸°ê¸° (ì• ë‹ˆë©”ì´ì…˜ìš© í´ë˜ìŠ¤ ì¡°ì‘)
    noticeDisplay.classList.remove("active");
    noticeDisplay.classList.add("hide");

    setTimeout(() => {
      // ìƒˆ ë‚´ìš© ì‚½ì…
      noticeDisplay.innerHTML = `
        <p class="notice-text">ê³µì§€ì‚¬í•­ ì•ˆë‚´</p>
        <p class="notice-date">${notice.title}</p>
        <p class="notice-date">${notice.date}</p>
      `;

      // ìƒˆ ë‚´ìš© í‘œì‹œ
      noticeDisplay.classList.remove("hide");
      noticeDisplay.classList.add("active");
    }, 500);
  }

  // ìë™ ìˆœí™˜
  function rotateNotices() {
    setInterval(() => {
      currentIndex = (currentIndex + 1) % notices.length;
      displayNotice(notices[currentIndex]);
    }, 5000);
  }

  // ìˆ˜ë™ ì „í™˜ (ì•„ì´ì½˜ í´ë¦­ ì‹œ)
  dropdownIcon.addEventListener("click", (e) => {
    e.preventDefault();
    currentIndex = (currentIndex + 1) % notices.length;
    displayNotice(notices[currentIndex]);
  });

  // ì´ˆê¸°í™”
  if (notices.length > 0) {
    noticeDisplay.classList.add("active");
    displayNotice(notices[currentIndex]);
    rotateNotices();
  } else {
    noticeDisplay.innerHTML = `
      <p class="notice-text">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    `;
  }
});

    const images = document.querySelectorAll('.main-banner img');
    const dotsContainer = document.getElementById('bannerDots');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    let currentIndex = 0;

    // Generate indicator dots
    images.forEach((_, index) => {
        const dot = document.createElement('span');
        dot.addEventListener('click', () => showSlide(index));
        dotsContainer.appendChild(dot);
    });

    const dots = document.querySelectorAll('.banner-dots span');
    updateDots();

    // Slide navigation function
    function showSlide(index) {
        images[currentIndex].classList.remove('active');
        dots[currentIndex].classList.remove('active');
        currentIndex = (index + images.length) % images.length;
        images[currentIndex].classList.add('active');
        dots[currentIndex].classList.add('active');
    }

    function updateDots() {
        dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentIndex);
        });
    }

    // Auto slide
    function autoSlide() {
        showSlide(currentIndex + 1);
    }

    let slideInterval = setInterval(autoSlide, 3000);

    // Prev/Next button event listeners
    if (prevBtn != null) {
        prevBtn.addEventListener('click', () => {
            clearInterval(slideInterval);
            showSlide(currentIndex - 1);
            slideInterval = setInterval(autoSlide, 3000);
        });
    }
    if (nextBtn != null) {
        nextBtn.addEventListener('click', () => {
            clearInterval(slideInterval);
            showSlide(currentIndex + 1);
            slideInterval = setInterval(autoSlide, 3000);
        });
    }

    document.querySelectorAll(".category-item").forEach(item => item.addEventListener("click", evt => {
            location.href = '/course/list/all?subjectId=' + item.dataset.subject;
        })
    );

    document.querySelectorAll(".course-card").forEach(value => {
        value.addEventListener("click", evt => {
            location.href='/course/view?courseId='+value.dataset.course_id;
        })
    });
</script>
</body>
</html>